<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>scaleApp</title>
    <link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Droid+Sans&subset=latin">
    <link type="text/css" rel="stylesheet" href="/css/reset.css">
    <link type="text/css" rel="stylesheet" href="/css/docs.css">
    <link type="text/css" rel="stylesheet" href="/css/print.css" media="print">
    <link type="text/css" rel="stylesheet" href="http://yandex.st/highlightjs/6.1/styles/dark.min.css">
    
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>
    <script type="text/javascript" src="http://yandex.st/highlightjs/6.1/highlight.min.js"></script>
    
    <script type="text/javascript" src="/js/viewer.js"></script>
</head>
<body>
    <div id="page">
        <a name="top" />
        
            <header id="header">
                <h1><a href="/">scaleApp</a></h1>
            </header>
        
        <div id='content'><a name="what-is-scaleapp"></a><h1>What is scaleApp?</h1>
<p>scaleApp is a tiny JavaScript framework for scalable
<a href="http://en.wikipedia.org/wiki/Single-page_application">One-Page-Applications / Single-Page-Applications</a>.
The framework allows you to easily create complex web applications.

</p>
<p><a href="http://travis-ci.org/flosse/scaleApp"><img src="https://secure.travis-ci.org/flosse/scaleApp.png" alt="Build Status"></a>

</p>
<p>You can dynamically start and stop/destroy modules that acts as small parts of
your whole application.

</p>
<a name="architecture-overview"></a><h2>Architecture overview</h2>
<p>scaleApp is based on a decoupled, event-driven architecture that is inspired by
the talk of Nicholas C. Zakas -
<a href="https://www.youtube.com/watch?v=vXjVFPosQHw">&quot;Scalable JavaScript Application Architecture&quot;</a>
(<a href="http://www.slideshare.net/nzakas/scalable-javascript-application-architecture">Slides</a>).
There also is a little <a href="http://www.ubelly.com/2011/11/scalablejs/">Article</a> that
describes the basic ideas.

</p>
<p><img src="https://raw.github.com/flosse/scaleApp/master/architecture.png" alt="scaleApp architecture">

</p>
<p>Unlike Zakas recommendations to abstract DOM manipulations and separating the
framework from the base library, scaleApp does not implement any DOM methods.

</p>
<p>Instead scaleApp can be extended by plugins. So you can just use one of your
favorite libs (e.g. jQuery) as base library or you are going to implement all
your needed DOM methods into the DOM plugin (<code>scaleApp.dom.coffee</code>) for a more
clean and scaleable architecture.

</p>
<a name="features"></a><h2>Features</h2>
<ul>
<li>loose coupling of modules</li>
<li>small &amp; simple</li>
<li>no serverside dependencies</li>
<li>modules can be tested separately</li>
<li>replacing any module without affecting other modules</li>
<li>extendable with plugins</li>
<li>browser and node.js support</li>
</ul>
<a name="extendable"></a><h2>Extendable</h2>
<p>scaleApp itself is very small but it can be extended with plugins. There already
are some plugins available (e.g. <code>mvc</code>, <code>i18n</code>, <code>permission</code>, etc.) but you can
easily define your own one.

</p>
<a name="download-latest-version"></a><h2>Download latest version</h2>
<ul>
<li><a href="https://github.com/flosse/scaleApp/tarball/v0.3.7">scaleApp 0.3.7.tar.gz</a></li>
<li><a href="https://github.com/flosse/scaleApp/zipball/v0.3.7">scaleApp 0.3.7.zip</a></li>
</ul>
<a name="quick-start"></a><h1>Quick Start</h1>
<p>Link <code>scaleApp.min.js</code> in your HTML file:

</p>
<pre><code class="lang-html">&lt;script src=&quot;scaleApp.min.js&quot;&gt;&lt;/script&gt;</code></pre>
<p>If you&#39;re going to use it with node:

</p>
<pre><code class="lang-shell">sudo npm -g install scaleapp</code></pre>
<pre><code class="lang-javascript">var sa = require(&quot;scaleapp&quot;);</code></pre>
<a name="register-modules"></a><h2>Register modules</h2>
<pre><code class="lang-javascript">scaleApp.register( &quot;myModuleId&quot;, function( sb ){
  return {
    init:    function(){ /*...*/ },
    destroy: function(){ /*...*/ }
  };
});</code></pre>
<p>As you can see the module is a function that takes the sandbox as a parameter
and returns an object that has two functions <code>init</code> and <code>destroy</code>.
Of course your module can be any usual class with those two functions.
Here an coffee-script example:

</p>
<pre><code class="lang-coffeescript">class MyGreatModule

  constructor: (@sb) -&gt;
  init: -&gt; alert &quot;Hello world!&quot;
  destroy: -&gt; alert &quot;Bye bye!&quot;

scaleApp.register &quot;myGreatModule&quot;, MyGreatModule</code></pre>
<p>The <code>init</code> function is called by the framework when the module is supposed to
start. The <code>destroy</code> function is called when the module has to shut down.

</p>
<a name="show-registered-modules"></a><h3>Show registered modules</h3>
<pre><code class="lang-javascript">scaleApp.lsModules() // returns an array of module names</code></pre>
<a name="show-running-instances"></a><h3>Show running instances</h3>
<pre><code class="lang-javascript">scaleApp.lsInstances() // returns an array of instance names</code></pre>
<a name="asynchronous-initialization"></a><h2>Asynchronous initialization</h2>
<p>You can also init or destroy you module in a asynchronous way:

</p>
<pre><code class="lang-coffeescript">class MyAsyncModule

  constructor: (@sb) -&gt;

  init: (options, done) -&gt;
    doSomethingAsync (err) -&gt;
      done err
  destroy: (done) -&gt;
    doSomethingAsync (err) -&gt;
      done err

scaleApp.register &quot;myGreatModule&quot;, MyGreatModule
end -&gt; alert &quot;now the initialization is done&quot;
scaleApp.start &quot;myGreatModule&quot;, callback: end</code></pre>
<a name="unregister-modules"></a><h2>Unregister modules</h2>
<p>It&#39;s simple:

</p>
<pre><code class="lang-javascript">scaleApp.unregister(&quot;myGreatModule&quot;);</code></pre>
<a name="start-modules"></a><h2>Start modules</h2>
<p>After your modules are registered, start your modules:

</p>
<pre><code class="lang-javascript">scaleApp.start( &quot;myModuleId&quot; );
scaleApp.start( &quot;anOtherModule&quot; );</code></pre>
<a name="start-options"></a><h3>Start options</h3>
<p>You may also want to start several instances of a module:

</p>
<pre><code class="lang-javascript">scaleApp.start( &quot;myModuleId&quot;, {instanceId: &quot;myInstanceId&quot; } );
scaleApp.start( &quot;myModuleId&quot;, {instanceId: &quot;anOtherInstanceId&quot; });</code></pre>
<p>If you pass a callback function it will be called after the module started:

</p>
<pre><code class="lang-javascript">scaleApp.start( &quot;myModuleId&quot;, {callback: function(){ /*...*/ } );</code></pre>
<p>All other options you pass are available through the sandbox:

</p>
<pre><code class="lang-javascript">scaleApp.register( &quot;mod&quot;, function(s){
  sb = s
  return {
    init:    function(){ alert( sb.options.myProperty ); },
    destroy: function(){ /*...*/ }
  };
});

scaleApp.start(&quot;mod&quot;, {myProperty: &quot;myValue&quot;});</code></pre>
<p>If all your modules just needs to be instanciated once, you can simply starting
them all:

</p>
<pre><code class="lang-javascript">scaleApp.startAll();</code></pre>
<p>To start some special modules at once you can pass an array with the module
names:

</p>
<pre><code class="lang-javascript">scaleApp.startAll([&quot;moduleA&quot;,&quot;moduleB&quot;]);</code></pre>
<p>You can also pass a callback function:

</p>
<pre><code class="lang-javascript">scaleApp.startAll(function(){
  // do something when all modules were initialized
});</code></pre>
<a name="stopping"></a><h2>Stopping</h2>
<p>It&#39;s obvious:

</p>
<pre><code class="lang-javascript">scaleApp.stop(&quot;moduleB&quot;);
scaleApp.stopAll();</code></pre>
<a name="listing-modules-and-instances"></a><h2>Listing modules and instances</h2>
<pre><code class="lang-javascript">lsModules()   // returns an array of all registered module IDs
lsInstances() // returns an array of all running instance IDs</code></pre>
<a name="publish-subscribe"></a><h2>Publish/Subscribe</h2>
<p>If the module needs to communicate with others, you can use the <code>publish</code> and
<code>subscribe</code> methods.

</p>
<a name="publish"></a><h3>Publish</h3>
<p>The <code>publish</code> function takes three parameters whereas the last one is optional:
- <code>topic</code> : the channel name you want to publish to
- <code>data</code>  : the data itself
- <code>publishReference</code> : If the data should be passed as a reference to the other
modules this parameter has to be set to <code>true</code>.
By default the data object gets copied so that other modules can&#39;t influence the
original object.

</p>
<p>The publish function is accessible through the sandbox:

</p>
<pre><code class="lang-javascript">sb.publish( &quot;myEventTopic&quot;, myData );</code></pre>
<a name="subscribe"></a><h3>Subscribe</h3>
<p>A message handler could look like this:

</p>
<pre><code class="lang-javascript">var messageHandler = function( data, topic ){
  switch( topic ){
    case &quot;somethingHappend&quot;:
      sb.publish( &quot;myEventTopic&quot;, processData(data) );
      break;
    case &quot;aNiceTopic&quot;:
      justProcess( data );
      break;
  }
};</code></pre>
<p>... and it can listen to one or more channels:

</p>
<pre><code class="lang-javascript">sub1 = sb.subscribe( &quot;somthingHappend&quot;, messageHandler );
sub2 = sb.subscribe( &quot;aNiceTopic&quot;, messageHandler );</code></pre>
<p>Or just do it at once:

</p>
<pre><code class="lang-javascript">sb.subscribe({
  topicA: cbA
  topicB: cbB
  topicC: cbC
});</code></pre>
<p>You can also subscribe to several channels at once:

</p>
<pre><code class="lang-javascript">sb.subscribe([&quot;a&quot;, &quot;b&quot;], cb);</code></pre>
<a name="attache-and-detache"></a><h4>attache and detache</h4>
<p>A subscription can be detached and attached again:

</p>
<pre><code class="lang-javascript">sub.detach(); // don&#39;t listen any more
sub.attach(); // receive upcoming messages</code></pre>
<a name="unsubscribe"></a><h4>Unsubscribe</h4>
<p>You can unsubscribe a function from a channel

</p>
<pre><code class="lang-javascript">sb.unsubscribe(&quot;a-channel&quot;, callback);</code></pre>
<p>And you can remove a callback function from all channels

</p>
<pre><code class="lang-javascript">sb.unsubscribe(callback);</code></pre>
<p>Or remove all subscriptions from a channel:

</p>
<pre><code class="lang-javascript">sb.unsubscribe(&quot;channelName&quot;);</code></pre>
<a name="plugins"></a><h1>Plugins</h1>
<a name="i18n-multi-language-uis"></a><h2>i18n - Multi language UIs</h2>
<p>Link <code>scaleApp.i18n.min.js</code> in your HTML file:

</p>
<pre><code class="lang-html">&lt;script src=&quot;scaleApp.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;scaleApp.i18n.min.js&quot;&gt;&lt;/script&gt;</code></pre>
<p>If your application has to support multiple languages, you can pass an objects
containing the localized strings with the options object.

</p>
<pre><code class="lang-javascript">var myLocalization =
{
  en: { welcome: &quot;Welcome&quot;, ... },
  de: { welcome: &quot;Willkommen&quot;, ... },
  ...
}
...
scaleApp.register( &quot;moduleId&quot;, myModule, { i18n: myLocalization } );</code></pre>
<p>Now you can access these strings easily trough the sandbox using the <code>_</code> method.
Depending on which language is set globally it returns the corresponding
localized string.

</p>
<pre><code class="lang-javascript">sb._(&quot;myStringId&quot;);</code></pre>
<p>You can set the language globally by using the <code>setLanguage</code> method:

</p>
<pre><code class="lang-javascript">scaleApp.i18n.setLanguage( &quot;de&quot; );</code></pre>
<p>You can also set a global i18n object which can be used by all modules:

</p>
<pre><code class="lang-javascript">scaleApp.i18n.setGlobal( myGlobalObj );</code></pre>
<a name="mvc-very-simple-mvc"></a><h2>mvc - very simple MVC</h2>
<p>Here is a sample use case for using the MVC plugin (in coffeescript).

</p>
<pre><code class="lang-coffeescript">class MyModel extends scaleApp.Model name: &quot;Noname&quot;</code></pre>
<pre><code class="lang-coffeescript">class MyView extends scaleApp.View

  constructor: (@model, @sb, @template) -&gt; super @model

  # The render method gets automatically called when the model changes
  # The &#39;getContainer&#39; method is provided by the dom plugin
  render: -&gt; @sb.getContainer.innerHTML = @template @model</code></pre>
<pre><code class="lang-coffeescript">class MyController extends scaleApp.Controller

  changeName: (name) -&gt; @model.set &quot;name&quot;, name</code></pre>
<pre><code class="lang-coffeescript">registerModule &quot;myModule&quot;, (@sb) -&gt;

  init: (opt) -&gt;

    # You can use any template engine you like. Here it&#39;s
    # just a simple function
    template = (model) -&gt; &quot;&lt;h1&gt;Hello #{model.name}&lt;/h1&gt;&quot;

    @m = new MyModel
    @v = new MyView @m, @sb, @template
    @c = new MyController @m, @v

    # listen to the &quot;changeName&quot; event
    @sb.subscribe &quot;changeName&quot;, @c.changeName, @c

  destroy: -&gt;
    delete @c
    delete @v
    delete @m
    @sb.unsubscribe @</code></pre>
<pre><code class="lang-coffeescript">scaleApp.publish &quot;changeName&quot;, &quot;Peter&quot;</code></pre>
<a name="permission-controll-all-messages"></a><h2>permission - controll all messages</h2>
<p>If you include the <code>permission</code> plugin, all <code>Mediator</code> methods will be rejected
by default to enforce you to permit any message method explicitely.

</p>
<pre><code class="lang-coffeescript">scaleApp.addPermission &quot;instanceA&quot;, &quot;subscribe&quot;
scaleApp.addPermission &quot;instanceB&quot;, &quot;publish&quot;</code></pre>
<p>Now <code>instanceA</code> is allowed to subscribe to a channel but <code>instanceB</code> cannot
subscribe. Therefore <code>instanceB</code> can publish data and <code>instanceB</code> can not.

</p>
<p>Of course you can remove a permission at any time:

</p>
<pre><code class="lang-coffeescript">scaleApp.removePermission &quot;moduleA&quot;, &quot;publish&quot;</code></pre>
<a name="util-some-helper-functions"></a><h2>util - some helper functions</h2>
<ul>
<li><code>sb.mixin(receivingClass, givingClass, override=false)</code></li>
<li><code>sb.countObjectKeys(object)</code></li>
</ul>
<a name="other-plugins"></a><h2>Other plugins</h2>
<ul>
<li>dom - basic DOM manipulations (currently only used for <code>getContainer</code>)</li>
</ul>
<a name="write-your-own-plugin"></a><h2>Write your own plugin</h2>
<pre><code class="lang-coffeescript">scaleApp.registerPlugin

  # set the ID of your plugin
  id: &quot;myPlgin&quot;

  # define the core extensions
  core:
    myCoreFunction: -&gt; alert &quot;Hello core plugin&quot;
    myBoringProperty: &quot;boring&quot;

  # define the sandbox extensions
  sandbox: (@sb) -&gt;
    appendFoo: -&gt; @sb.getContainer.append &quot;foo&quot;</code></pre>
<p>Usage:

</p>
<pre><code class="lang-coffeescript">scaleApp.myCoreFunction()   # alerts &quot;Hello core plugin&quot;

class MyModule
  constructor: (@sb) -&gt;
  init: -&gt; @sb.appendFoo()  # appends &quot;foo&quot; to the container
  destroy: -&gt;</code></pre>
<a name="build-browser-bundles"></a><h1>Build browser bundles</h1>
<p>Just type

</p>
<pre><code class="lang-shell">cake bundle</code></pre>
<p>that will create <code>scaleApp.js</code>, <code>scaleApp.min.js</code>, <code>scaleApp.full.js</code> and
<code>scaleApp.full.min.js</code> whithin the <code>build/bundles/</code> directory.

</p>
<p>If you want scaleApp bundled with special plugins type

</p>
<pre><code class="lang-shell">cake -p [PLUGIN_NAME] bundle</code></pre>
<p>e.g. <code>cake -p dom,mvc bundle</code> creates the file <code>scaleApp.custom.js</code> that
contains scaleApp itself the dom plugin and the mvc plugin.

</p>
<a name="testing"></a><h1>Testing</h1>
<pre><code class="lang-shell">npm test</code></pre>
<a name="demo"></a><h1>Demo</h1>
<p><strong>WARNING</strong>: the demo is out of date

</p>
<p>You can try out the <a href="http://www.scaleapp.org/demo/fast/">sample application</a>
that is build on <a href="http://www.scaleapp.org">scaleApp</a>.
Also have a look at the <a href="http://github.com/flosse/FAST">source code</a>.

</p>
<a name="licence"></a><h1>Licence</h1>
<p>scaleApp is licensed under the MIT license.
For more information have a look at
<a href="https://raw.github.com/flosse/scaleApp/master/LICENCE.txt">LICENCE.txt</a>.
</p>

</div>
        <footer id="footer">
            Powered by <a href="http://github.com/maximebf/beautiful-docs">beautiful-docs</a> -
            <a href="#top">Back to top</a> - <a href="/all.html">Everything on a single page</a>
            - <a href="?print=1">Print current page</a> - <a href="/all.html?print=1">Print all pages</a>
            
                <a href="https://github.com/flosse/scaleApp" id="fork-me-on-github">Fork me on Github</a>
            
        </footer>
    </div>
</body>
</html>
